"use strict";(self["webpackChunkvue3_nb0"]=self["webpackChunkvue3_nb0"]||[]).push([[49],{86049:(e,l,a)=>{a.r(l),a.d(l,{default:()=>C});a(14580);var t=a(44401),u=a(28849),n=a(71066),i=a(16141),o=function(e){return(0,t.dD)("data-v-6fe9478e"),e=e(),(0,t.Cn)(),e},s={class:"forget_view"},r={class:"forget_title"},v={class:"tab_view"},c={key:0,class:"list_item"},d=o((function(){return(0,t._)("div",{class:"item_label"},"账号：",-1)})),m={key:1,class:"list_item"},_=o((function(){return(0,t._)("div",{class:"item_label"},"密保问题：",-1)})),p={key:2,class:"list_item"},f=o((function(){return(0,t._)("div",{class:"item_label"},"密保答案：",-1)})),g={key:3,class:"list_item"},w=o((function(){return(0,t._)("div",{class:"item_label"},"密码：",-1)})),b={key:4,class:"list_item"},k=o((function(){return(0,t._)("div",{class:"item_label"},"确认密码：",-1)})),y={class:"list_btn"};const h={__name:"forget",setup:function(e){(0,i.yj)();var l,a=null===(l=(0,t.FN)())||void 0===l?void 0:l.appContext.config.globalProperties;(0,t.bv)((function(){}));var o=(0,n.iH)(1),h=(0,n.iH)({}),V=(0,n.iH)({}),U=function(){return h.value.role="shangjia",h.value.role?h.value.username?void(null===a||void 0===a||a.$http({url:h.value.role+"/security?username=".concat(h.value.username),method:"get"}).then((function(e){e.data.data?(V.value=e.data.data,o.value=2):null===a||void 0===a||a.$toolUtil.message("未获取到用户信息","error")}))):(null===a||void 0===a||a.$toolUtil.message("请输入账号","error"),!1):(null===a||void 0===a||a.$toolUtil.message("请选择角色","error"),!1)},C=function(){if(V.value.panswer!=h.value.myanswer)return null===a||void 0===a||a.$toolUtil.message("答案输入不正确","error"),!1;a.$message.success("答案正确"),o.value=3},q=function(){if(h.value.mima!=h.value.mima2)return null===a||void 0===a||a.$toolUtil.message("两次密码输入不一致","error"),!1;"shangjia"==h.value.role&&(V.value.mima=h.value.mima),null===a||void 0===a||a.$http({url:h.value.role+"/update",method:"post",data:V.value}).then((function(e){null===a||void 0===a||a.$toolUtil.message("修改密码成功","success",(function(e){$()}))}))},$=function(){null===a||void 0===a||a.$router.push({path:"/login"})};return function(e,l){var a=(0,t.up)("el-input"),n=(0,t.up)("el-button"),i=(0,t.up)("el-form");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("div",s,[(0,t.Wm)(i,{model:h.value,class:"forget_box"},{default:(0,t.w5)((function(){return[(0,t._)("div",r,"基于Android的农产品信息发布与电子交易平台"+(0,u.zw)(1==o.value?"输入账号":2==o.value?"输入密保":"重置密码"),1),(0,t._)("div",v,[(0,t._)("div",{class:(0,u.C_)(["tab",1==o.value?"tab_active":""])},"输入账号",2),(0,t._)("div",{class:(0,u.C_)(["tab",2==o.value?"tab_active tab_active1":""])}," 输入密保",2),(0,t._)("div",{class:(0,u.C_)(["tab",3==o.value?"tab_active tab_active1 tab_active2":""])},"重置密码",2)]),1==o.value?((0,t.wg)(),(0,t.iD)("div",c,[d,(0,t.Wm)(a,{class:"list_inp",modelValue:h.value.username,"onUpdate:modelValue":l[0]||(l[0]=function(e){return h.value.username=e}),placeholder:"请输入账号"},null,8,["modelValue"])])):(0,t.kq)("",!0),2==o.value?((0,t.wg)(),(0,t.iD)("div",m,[_,(0,t.Wm)(a,{class:"list_inp",modelValue:V.value.pquestion,"onUpdate:modelValue":l[1]||(l[1]=function(e){return V.value.pquestion=e}),placeholder:"请输入密保问题"},null,8,["modelValue"])])):(0,t.kq)("",!0),2==o.value?((0,t.wg)(),(0,t.iD)("div",p,[f,(0,t.Wm)(a,{class:"list_inp",modelValue:h.value.myanswer,"onUpdate:modelValue":l[2]||(l[2]=function(e){return h.value.myanswer=e}),placeholder:"请输入密保答案"},null,8,["modelValue"])])):(0,t.kq)("",!0),3==o.value?((0,t.wg)(),(0,t.iD)("div",g,[w,(0,t.Wm)(a,{class:"list_inp",modelValue:h.value.mima,"onUpdate:modelValue":l[3]||(l[3]=function(e){return h.value.mima=e}),type:"password",placeholder:"请输入密码",autocomplete:"new-password"},null,8,["modelValue"])])):(0,t.kq)("",!0),3==o.value?((0,t.wg)(),(0,t.iD)("div",b,[k,(0,t.Wm)(a,{class:"list_inp",modelValue:h.value.mima2,"onUpdate:modelValue":l[4]||(l[4]=function(e){return h.value.mima2=e}),type:"password",placeholder:"请输入确认密码",autocomplete:"new-password"},null,8,["modelValue"])])):(0,t.kq)("",!0),(0,t._)("div",y,[1==o.value?((0,t.wg)(),(0,t.j4)(n,{key:0,class:"get_btn",type:"success",onClick:U},{default:(0,t.w5)((function(){return[(0,t.Uk)("获取密保")]})),_:1})):(0,t.kq)("",!0),2==o.value?((0,t.wg)(),(0,t.j4)(n,{key:1,class:"valid_btn",type:"primary",onClick:C},{default:(0,t.w5)((function(){return[(0,t.Uk)("确认密保")]})),_:1})):(0,t.kq)("",!0),3==o.value?((0,t.wg)(),(0,t.j4)(n,{key:2,class:"update_btn",type:"warning",onClick:q},{default:(0,t.w5)((function(){return[(0,t.Uk)("重置密码")]})),_:1})):(0,t.kq)("",!0),(0,t._)("div",{class:"r-login",onClick:$},"已有账号，直接登录")])]})),_:1},8,["model"])])])}}};var V=a(51059);const U=(0,V.Z)(h,[["__scopeId","data-v-6fe9478e"]]),C=U}}]);
//# sourceMappingURL=49.852ba8d5.js.map